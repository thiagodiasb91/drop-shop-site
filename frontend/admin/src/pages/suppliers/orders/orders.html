<div x-data="getData" class="min-h-screen bg-slate-900 px-4 py-6 md:px-8 text-slate-100">

  <!-- HEADER -->
  <header class="mb-6 flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
    <div>
      <h1 class="text-2xl font-semibold">Pedidos para envio</h1>
      <p class="text-sm text-slate-400">
        Pedidos pendentes de envio pelo fornecedor
      </p>
    </div>

    <button @click="printAllPending()"
      class="rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium hover:bg-indigo-500">
      Imprimir todas as etiquetas pendentes
    </button>
  </header>

  <!-- TOOLBAR -->
  <div class="mb-4 flex flex-col gap-3 md:flex-row md:items-end">

    <!-- Busca texto -->
    <div class="flex-1">
      <input type="text" placeholder="Buscar pedido, produto, SKU, vendedor ou cliente" x-model="search"
        class="w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm placeholder-slate-500 focus:border-indigo-500 focus:outline-none" />
    </div>

    <!-- Data inicial -->
    <div>
      <label class="block text-xs text-slate-400 mb-1">De</label>
      <input type="date" x-model="dateFrom"
        class="rounded-md border border-slate-700 bg-slate-900 px-2 py-1.5 text-sm focus:border-indigo-500 focus:outline-none">
    </div>

    <!-- Data final -->
    <div>
      <label class="block text-xs text-slate-400 mb-1">Até</label>
      <input type="date" x-model="dateTo"
        class="rounded-md border border-slate-700 bg-slate-900 px-2 py-1.5 text-sm focus:border-indigo-500 focus:outline-none">
    </div>

    <!-- Limpar -->
    <button @click="clearFilters()" class="rounded-md border border-slate-700 px-3 py-2 text-sm hover:bg-slate-800">
      Limpar
    </button>

  </div>


  <!-- LISTA -->
  <div class="space-y-4">
    <template x-for="order in filteredOrders" :key="order.id">

      <div class="rounded-lg border border-slate-700 bg-slate-800">

        <!-- HEADER DO PEDIDO -->
        <div class="grid grid-cols-1 gap-3 border-b border-slate-700 px-4 py-3
                    md:grid-cols-12 md:items-center">

          <!-- Pedido -->
          <div class="md:col-span-2">
            <p class="text-sm font-semibold" x-text="order.code"></p>
            <p class="text-xs text-slate-500" x-text="order.date"></p>
          </div>

          <!-- Vendedor -->
          <div class="md:col-span-3">
            <p class="text-xs text-slate-400">Vendedor</p>
            <p class="text-sm truncate" x-text="order.seller"></p>
          </div>

          <!-- Cliente -->
          <div class="md:col-span-4">
            <p class="text-xs text-slate-400">Cliente</p>
            <p class="text-sm truncate" x-text="order.customer.name"></p>
            <p class="text-xs text-slate-500 truncate" x-text="order.customer.address"></p>
          </div>

          <!-- Status -->
          <div class="md:col-span-2">
            <span class="inline-flex rounded-full px-3 py-1 text-xs font-medium" :class="order.status === 'pending'
                ? 'bg-amber-500/10 text-amber-400'
                : 'bg-emerald-500/10 text-emerald-400'" x-text="order.status === 'pending' ? 'Pendente' : 'Enviado'">
            </span>
          </div>

          <!-- Ação -->
          <div class="md:col-span-1 text-right">
            <button @click="printLabel(order)" class="rounded-md bg-indigo-600 px-3 py-1.5 text-xs hover:bg-indigo-500">
              Etiqueta
            </button>
          </div>
        </div>

        <!-- ITENS -->
        <div class="divide-y divide-slate-700">
          <template x-for="item in order.items" :key="item.skuId">

            <div class="grid grid-cols-1 gap-2 px-4 py-3 text-sm
                     md:grid-cols-12 md:items-center
                     bg-slate-800 odd:bg-slate-850">

              <!-- Produto -->
              <div class="md:col-span-10">
                <p class="font-medium leading-tight" x-text="item.productName"></p>

                <div class="mt-1 flex flex-wrap gap-2 text-xs">
                  <span class="rounded bg-sky-500/10 px-2 py-0.5 text-sky-400">
                    Produto ID: <span x-text="item.productId"></span>
                  </span>

                  <span class="rounded bg-violet-500/10 px-2 py-0.5 text-violet-400">
                    SKU ID: <span x-text="item.skuId"></span>
                  </span>

                  <span class="rounded bg-emerald-500/10 px-2 py-0.5 text-emerald-400">
                    <span x-text="item.skuLabel"></span>
                  </span>
                </div>
              </div>

              <!-- Quantidade -->
              <div class="md:col-span-2 text-right">
                <p class="text-xs text-slate-400">Quantidade</p>
                <p class="font-semibold text-slate-200" x-text="item.qty"></p>
              </div>

            </div>
          </template>
        </div>

      </div>
    </template>
  </div>
</div>